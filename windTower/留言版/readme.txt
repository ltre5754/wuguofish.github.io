Motto Kakikomitai Ver0.864 (多功能晉級留言板) 中文二版 by 驚直 [2001.3.4]

　　　　★ 第一次架設的朋友請捲到下面看一看設置注意事項．謝謝 ★

───【版本更新異動】────────────────────────────

2001.03.04 / Ver0.864 中文二版
　發現有人在留言板測試時，輸入無意義的長英文字串，可以導致版面亂掉。
　今天突然給我找到了防止出現這情形的解決辦法，所以就作了一次小更新。
　．在表頭部份CSS樣式表的td標籤加入了word-break屬性，設為break-all。
　　其實作用並不是用來「自動斷行」，而是防止有人惡意破壞留言板的版面。
　　到底根本沒有一個英文字會長得那樣誇張吧！

2001.02.17 / Ver0.864 中文版．讓Netscape 6的用家更好看！
　驚直今天用新下載回來的Netscape 6.01打開留言板看看，發覺程式跟Ｎ６
　「不是太兼容」，秀出來的畫面實在難看了點，所以就特別針對Ｎ６做了
　一些版面部份的修改，特別是放棄了簡短形式的CSS，讓其更兼容Ｎ６瀏覽器！

　◇原日文版的修正：
　．把圖檔一覽表的「返回」連結加回去(不適用於中文版)。
　．「一氣回覆」套用留言內容最高字數的限制。

　◇中文版新增／變更的部份：
　．CSS樣式表設定的部份作了大篇幅的修改。
　．加入調整英數欄位在Netscape瀏覽器的闊度判別。
　．非IE瀏覽器(針對Netscape和Opera)使用特別樣式表對應。
　．將部份Shorthand形式的CSS改為長寫式，主要為兼容Netscape瀏覽器。
　．恢復原作者的設定，除去maillinklogo/homelinklogo/res_gif在img語法的
　　"align=absmiddle"標籤，主要為兼容Netscape瀏覽器。
　．修正原程式的下載頁面功能使用了調整空位用的DUMMY圖檔。
　．一大堆雜七雜八的修改增刪…

2001.01.31 / Ver0.863 中文版．原作者的修正
　．修正當刪除留言記錄後，留言編號的數值沒有清空的臭蟲。

2001.01.31 / Ver0.862 中文四版．美化修改
　．針對留言內容過短的時候，留言內容會跟留言資訊「黏在一起」的特殊情況。
　　稍為修改了一下表格的配置，留言內容改為靠上方，留言資訊則改為靠下方。

2001.01.30 / Ver0.862 中文三版．有點小差
　．針對"<!--"這個問題語法修正了一個地方。
　　已安裝好不欲更新者，請搜尋"<$_(.|\n)*>"字串將那個">"刪掉即可。
　．將原作者的網址改為新的http://tackysroom.com ...:P

2001.01.29 / Ver0.862 中文二版．有點小差
　．修正「編輯留言內容」字樣置中。
　　已安裝好不欲更新者，請搜尋"編輯留言內容"自行加上一對center語法即可。
　．刪去了樣式表中「滑鼠移至時自動選擇輸入欄位」的JavaScript設定值。
　　新安裝者如果還是想看一下效果，可以把這個tag加回去$css_style最末端：
　　onMouseOver="this.focus()"

2001.01.23 / Ver0.862 中文版．說實在的，這次只有中文版的部份有改動（笑）
　原日文版只不過修正了某處的&nbsp;語法錯誤，便把版本編號增加0.001了！（笑）
　其實這個小蟲早就給我幹掉啦！（大笑） 不過正好趁這次機會將先前0.861中文版的
　問題一併解決。

　◇以下是中文版新增／變更的部份：
　．原作者加入「一氣回覆」功能後sendmail部份不支援此功能，郵件出現空白訊息。
　　弟在中文版裡面勉強的把這個缺陷「修補」好了！
　．0.861版的「回覆留言」圖檔變回了日文，已經換回弟製作的中文圖檔了 m(_ _)m
　．$homelinklogo和$maillinklogo的img語法加回"alt=xxxx"連結突顯提示。
　．發現原來HyperMart及VirtualAve可以共用一個廣告語法，所以就把它們合併了。

2001.01.16 / Ver0.861 中文版．『真是給它有夠累的說！』（汗）
　原日文版作了一次大改版，加入一堆新功能，而這次更新中文化也要重新翻一遍ㄝ！
　如果你決定要升級的話，建議你先將舊版本的所有檔案備份一下，然後用這個新的蓋
　上去，再用編輯器打開兩個版本作個比對編輯，更新動作以新版本的為優先。如果你
　先前沒有對整個程式做了太多的版面修改，相信很快便可以順利完成升級程序。

　◇以下是原作者新增／變更的部份：
　．加入管理者專用圖檔密碼。你可以為你的專用圖檔設定一個密碼，留言內容秀出來
　　的時候驗證密碼如果跟記錄所載相同，才會顯示出來，否則會使用一般圖檔。醬子
　　就算有人要冒充你來寫留言，也必須要知道你的專用圖檔密碼才能夠成功盜用你的
　　身份。（訪客可以「憑圖認人」，你可以使用任何名字來寫，只要密碼正確就好）
　．將原本的專用圖檔矩陣分拆成「管理者專用圖檔」及「常連者專用圖檔」。常連者
　　就是「經常留連者」的意思。前者不會在圖檔一覽表顯示出來，並加以密碼維護。
　．加入了專為管理者＆常連者而設的「一氣回覆」功能，讓你可以一口氣回覆整個頁
　　面的留言。(此刻我才醒覺原來「表情圖檔」不是太適合用在這個留言板上...>_<)
　．加入了提供留言記錄下載功能，讓使用者可以離線閱讀留言內容。
　．改變各種GIF圖檔指定IMG語法的設定模式，使其可以加入圖檔闊度與高度的數值。
　　相信原作者要作這個變更是因為要避免頁面顯示出來的時候圖檔移來移去。（笑）
　．使用sendmail程式寄發郵件通知的功能加入了一個設定值 ($sendsw)，讓你可以
　　避免連自己寫入的留言記錄也要通知。
　．晉級資格說明及各人晉級狀態的連結改以表單按鈕進入，兩列表皆加強表格顯示。

　◇以下是中文版新增／變更的部份：
　．新增一個cicon資料夾用來存放計數器圖檔。升級者請將圖檔移至正確資料夾。
　．使用sendmail程式寄發郵件通知時，會將特別碼"&#44;"轉換回半形逗號(,)。
　．把原本的CSS樣式表分拆成分別屬於輸入欄位、按鈕及下拉選單三張不同的樣式表，
　　並清楚註明套用的地方。（請參考$css_style,$css_button,$css_select的設定)
　．加入「微縮字形大小」的設定值，主要是讓管理者可以調整每篇留言下方資訊列
　　（顯示日期、時間、留言編號的那個地方）的文字大小。
　．一堆不大不小的語法修正、版面修改…
　．把整個調色盤重新調了一次色（笑）
　．加入HyperMart及Virtual Avenue的廣告語法。（搜尋"banner"字串便可以找到）
　　請大家以後就不要再跑來問我怎麼加上去：Ｐ

2001.01.06 / Ver0.851 中文版．驚直自己做的變動比作者還要多（笑）

　原日文版主要修正一些頁面語法錯誤，而這些錯處其實早就給我發現並修正了（笑）
　．原作者在圖檔一覽表裡加入了管理者及使用者的專用圖檔。

　◇以下是中文版新增／變更的部份：
　．換了一套新的預設圖檔，很多聲音說舊的那套太難看了。
　．加入原作者提供的"Motto Kakikomitai"標題圖檔。
　　（這個會不會是"mkakikomitai"的正式名稱啊？）
　．晉級資訊頁面以新視窗方式開啟。
　．重新建議檔案權限的「安全設定」為：
　　　程式資料夾:711  執行檔:700  讀寫檔:600  圖檔資料夾:755  圖形檔:644
　．郵件通知的信件原始碼 "Reply-to: " 加入對方的名字。
　．加入「英文專屬字形集」設定值，美化英數文字的顯示。
　．一堆不大不小的語法修正、圖檔位置移正、版面變動…

2000.07.28 / Ver0.84 中文版．[注意事項]加入第9項，升級者請閱讀。
　．驚直發現了一個多餘的圖檔(kakikomitai_home.gif)給它刪掉好了。

2000.07.26 / Ver0.83 中文版．[注意事項]加入第6,7,8項，升級者請閱讀。
　．原作者在程式內加入更新歷程紀錄。
　．原作者偷偷的把回扣篇數功能預設為關閉了($rdm=0)
　　(當初還以為程式有問題...真是嚇斃啦:P)

2000.06.30 / Ver0.82 中文版．驚直翻的首個中文化版出來囉！^^;

───【mkakikomitai留言板功能介紹】─────────────────────

Tacky所寫的mkakikomitai留言板CGI程式，功能超強、界面超炫，深受網友疼愛，
為近期網友爭相架設的留言板之一。以下是綜合我所體會到的，列出程式的功能：

　■設定容易
　　　要設定的檔案只有一個，就是主程式CGI檔。相比從前要設定一大堆的
　　　cgi,txt,html...實在輕鬆得多。程式設計有系統，每個副程式都不難
　　　找到，使用者修改也容易。

　■回覆留言
　　　除了板主可以回覆留言，訪客亦可回覆，回覆數量亦可多於一篇。
　　　管理者可再回Po，原留言者亦可回Po，就像使用討論板一般。
　　　新回覆的留言，會連同前面相同標題的留言整串移到最頂，方便檢索。

　■寫留言時的參考
　　　無論在寫新留言抑或回覆留言時，都可以看到最近的留言或是正在回覆
　　　的同一個串列的留言內容。還記得以前的留言板是分成「VIEW．看」和
　　　「SIGN．寫」兩個部份嗎？寫的時候不能做參考很麻煩說．．．
　　　現在這兩部份合而為一，在設置上也省卻了不必要的程序。

　■留言者管理功能
　　　從前只有板主才可以管理留言，現在訪客也可以了。只要記住自己留言時
　　　輸入的留言密碼，日後便可以輸入留言編號和對應密碼進入管理模式，
　　　編輯或刪除自己的留言，雖沒有預覽留言功能也不用擔心＆「出洋相」。
　　　板主亦可使用萬用密碼($password之設定)進入管理模式刪改留言記錄。

　■應用COOKIE技術
　　　網際網路技術日新月異，瀏覽器功能日益增多，COOKIE技術是其中之一。
　　　藉由此技術可在你第一次留言時將留言資料(名字/電子郵箱/個人網站等)
　　　寫入COOKIE檔案，以後在同一塊留言板留言的時候，這些資料會自動呈現
　　　眼前，毋須每次都輸入。(只適用於IE瀏覽器)

　■留言篇數及晉級制度
　　　程式不單會記錄每個留言者的名字和留言篇數，還會根據各人的留言篇數
　　　分作不同等級，這些等級和對應篇數都可以自由設定。新版並可以將留言篇數
　　　在留言內容顯示出來，讓大家看到留言者的活躍度(經驗值!?)。晉級制度，
　　　的確是一個令大家開懷的玩意兒！使用者可以在留言板檢視「晉級資格說明」
　　　及「各人晉級狀態」。

　■圖檔功能
　　　一個不支援圖檔的留言板，看來再難吸引別人來寫什麼東西。管理者可以設定
　　　一套圖檔供留言者選擇，亦可設定只有你或你的朋友才可以用的「專用圖檔」。
　　　使用圖檔可以有兩種形式：一、讓留言者自行選擇圖檔；二、根據留言者的晉級
　　　狀態由程式自動編配圖檔。如果是前者，留言時並提供「圖檔一覽表」供留言者
　　　預覽。

　■顏色選擇
　　　管理者可以預先設定一系列留言框及留言內容顏色，供留言者選擇。
　　　顏色選擇表使用圓形按鈕表格秀出來，一目了然之餘又吸引瀏覽者。

　■留言標題
　　　程式提供留言標題功能，每串列留言都由最先留言者定下一個標題，往後
　　　回覆的都不能刪改標題，儼然一個討論板的串列。此功能可以關閉。

　■舊留言集保存
　　　管理者可以設定當目前的留言達到某個數目後，便將最舊的留言逐個放進
　　　舊留言集，方便日後查閱。又可以設定每個舊留言集的篇數，只要編號１
　　　的舊留言集滿額，便會建立編號２的舊留言集，餘此類推。設立此功能，
　　　主要是避免留言記錄日積月累檔案太大導致讀取困難，其次是替過去的留
　　　言作一個有系統的整理，方便備份。歸入舊留言集的留言不能再作回覆。

　■瀏覽人次計數器
　　　看來作者照顧十分周到，連留言板也內置計數器程式。可以選擇以圖檔或
　　　純文字顯示出來。

　■支援多人同時使用
　　　程式配備安全的檔案鎖定(File Lock)功能，可在同一時間處理多過一個人
　　　的留言寫入。當這邊廂在回覆留言，那邊廂在寫新留言時也不會出現混亂。

　■支援貼圖、貼連結
　　　可以設定許不許可留言者使用HTML碼。貼連結的時候不用打<a>語法，
　　　只須打入網址，留言出來的時候便會自動變成「LINK HERE」字樣。

　■寄發郵件通知
　　　可以設定一個郵箱，每當有人寫新留言或回覆留言的時候，程式會自動把
　　　留言者的資料及留言內容寄到這個郵箱。

　■還有很多體貼的功能...
　　　．可選擇以分隔線(<hr>)來取代留言內容的換行字元(<br>)
　　　．留言框圓角效果
　　　．附送留言表格配套圖檔
　　　．附送留言資料列的「電子郵箱」、「個人網站」、「回覆留言」圖檔
　　　．可自定留言板的標題圖檔
　　　．可調整留言板整體文字大小
　　　．問題網域名稱攔截
　　　．可顯示留言者伺服器位址
　　　．留言密碼加密功能
　　　．重複留言偵查功能
　　　．將滑鼠移到輸入欄時會自動選取的JavaScript效果(IE-ONLY)

呼∼∼實在是我理想中的留言板！

───【mkakikomitai留言板設置注意事項】───────────────────

1. 以下是使用本程式最低限度要修改設定的部份：
     * 請將$url改為你自己的網站位址(首頁)
     * 將$password(密碼)改掉

2. 如果伺服器的perl程式路徑所在與預設的不同，
   嘗試將第一行的 #!/usr/local/bin/perl 改為 #!/usr/bin/perl

3. 由於程式預設是要使用舊留言集的功能，所以你必須建立一個名叫"old"的子資料夾。
   整體檔案架構如下：
     mkakikomitai/         (這是留言板CGI程式的主資料夾, 改其他名稱也可以)
     mkakikomitai/cicon/   (計數器圖檔資料夾)
     mkakikomitai/icon/    (留言圖檔資料夾)
     mkakikomitai/img/     (程式圖檔資料夾)
     mkakikomitai/old/     (舊留言集資料夾, 剛開始時是空白的)

4. 上傳檔案至提供CGI程式執行的檔案伺服器時，要把檔案及資料夾設定正確權限：
     程式所在的資料夾一般都會自動設成"755"，但也可以自行改為更安全的"711"。
     mkakikomitai.cgi 設成"755" (或更安全的"700")
     mkakikomitai.txt, mkakikomitai_cnt.txt, mkakikomitai.cnt
       設成"666" (或更安全的"600")
     其餘的圖檔設成"644"即可。

5. 程式原始碼其中一行 $ENV{'TZ'} = "CST-8"; 表示目前使用的是中國或台灣時間。
   請根據你所在的地理位置修改時區。（例如日本要改成"JST-9"）

6. 執行程式的連結很簡單，只要直接呼叫CGI程式的路徑即可。
   例如： http://xxxx.virtualave.net/mkakikomitai/mkakikomitai.cgi

   你可以在瀏覽器的網址列輸入這個網址直接呼叫CGI程式，也可以在html裡面做一個
   連結按下去看看。例如： <a href="....../mkakikomitai.cgi">我的留言板</a>

7. 作者附上的留言框圓角圖檔只適用於白色底色的留言板，如果你的留言板底色
   與白色相差很遠，留言框便會變得很難看啦！驚直給你幾個解決辦法:
   (1)盡量使用接近白色的顏色作底色。
   (2)改用方角留言框，也就是修改$maru=0。
   (3)自行用圖像編輯軟件 (eg. PhotoShop, Paint Shop Pro) 修改圓角圖檔，
      包括top_l_h.gif, top_r_h.gif, bottom_l_h.gif, bottom_r_h.gif。
   (4)參考作者提供的圓角圖檔，自行製作一套！別忘了要修改$top_l等四個路徑。
      示範圖檔包括top_l.gif, top_r.gif, bottom_l.gif, bottom_r.gif。

8. 如果你想要圖檔在留言內容的位置是「靠頂端」，搜尋兩個<td $tbbg>字串，
   改為<td $tbbg valign=top>便可以，不過可不是每一類圖檔都適合呢！

9. 驚直有發現一些網站管理者在架設完成之後，把弟的名字改成自己的名字，也就是：
   「中文化：ＸＸＸ」  把別人的心血說成是自己的，好像不太尊重是嗎？
   我是沒有打算跟那些人理論啦！只是隨他們喜歡吧。我相信旁人的眼睛都是雪亮的。
   說到底我中文化的目的只是跟大家分享一下，從來沒有想過只是為了借助那個小小的
   連結來增加網站的瀏覽人次呢。騙別人還可以，騙自己又有什麼好處！

───【驚直修改心得】────────────────────────────

除了把所有的日文完完全全的翻成中文、一絲不苟＆盡量追求完美以外，
我還有根據日本語＆中文的差異、個人喜好的驅使等緣故修改了一些程式碼：

　．刪除jcode部份
　．改了用中國及台灣的時間(CST-8)
　．「隱形連結」變成 LINK HERE
　．查閱連結(留言內容的LINK)改為開新視窗的方式顯示
　．圖檔一覽表改用開新視窗的方式顯示
　．半形逗號(,)重現眼前
　．自己做了一個回覆留言圖檔(res.gif)
　．寄發郵件通知的功能加入一個變數，讓信件標題更清晰

　．..........還有很多。只要你在程式碼裡面尋找「驚直」這兩個字，便會發現
　　　　　　　　　　　　我還有改了不少地方！

程式內還有很多可以自行設定的地方，請自行探索改改試試。
關於「怎樣上傳檔案」、「怎樣更改檔案權限」、「留言板位址在哪裡」、
「怎樣修改檔案」、「怎樣架CGI程式」等等的問題，請不要問我！
這些小事情相信可以向你的朋友請教吧！

───【有的沒的】──────────────────────────────

已經不知道第幾次修改這個留言板囉！我懷疑自己已經比原作者更熟悉這個程式。（汗）

　▼小小的要求
　　如果你想要跟我交換連結，我可是非常歡迎。但我希望大家不要把我的站站說成是
　　「CGI 下載站」之類什麼的，造成別人誤會，我的站站不是一個「資源網站」ㄚ！
　　假如你這樣做是希望我開發更多中文化程式，或者提高敝站的瀏覽人次，那我惟有
　　謝謝你的好意，而我卻是窩在心裡說不喜歡。請大家以後把我的站站分類作「個人
　　網站」或者「推薦好站」就已經很足夠了。拜託！

　▼中文化心得
　　偷偷滴向大家推薦一下EditPlus這個純文字編輯器。偶中文化這個CGI時 都是靠它
　　來幫助完成的。覺得自己有點不忠，因為自己本來就是EmEditor的長期支持者咩！
　　最近發現EditPlus居然有更多比EmEditor優勝的地方，害我靜悄悄的把一些原本
　　關聯給EmEditor都改了給EditPlus。總之兩者都顯的很卡哇伊，功能滿豐富的^_^;
　　　　EditPlus的網站 → http://www.editplus.com  (韓國人開發的)
　　　　EmEditor的網站 → http://www.emurasoft.com (日本人開發的)

───【聯絡方法】──────────────────────────────

歡迎大家來為我打氣：

天真的驚直 http://kiddiken.net
我的伊媚兒 webmaster@kiddiken.net
